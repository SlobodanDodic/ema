generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id             String  @id @default(uuid())
  username       String  @unique
  email          String  @unique
  hashedPassword String
  hashedToken    String? @unique
  isActivated    Boolean @default(false)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt()
}

model Employee {
  id                Int                @id @default(autoincrement())
  fullName          String
  jobTitle          String
  phoneNumber       String
  birthday          DateTime?
  contract          DateTime?
  eyes              DateTime?
  safety            DateTime?
  fire              DateTime?
  firstAid          DateTime?
  healthCareMembers HealthCareMember[]
  fitpassMembers    FitpassMember[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model HealthCareMember {
  id         Int       @id @default(autoincrement())
  name       String
  category   String
  start      DateTime?
  end        DateTime?
  employeeId Int
  employee   Employee  @relation(fields: [employeeId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model FitpassMember {
  id         Int       @id @default(autoincrement())
  name       String
  category   String
  start      DateTime?
  end        DateTime?
  employeeId Int
  employee   Employee  @relation(fields: [employeeId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
